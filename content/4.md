# 四. 自顶向下的语法分析
重点：自顶向下分析的基本思想、预测分析器总体结构、预测分析表的构造、递归下降分析基本思想、简单算术表达式的递归下降分析器。

难点：FIRST和FOLLOW集的求法，以及在构造LL(1)分析表时的使用。

## 1. 语法分析概述
**语法分析的任务**是检查词法分析器的单词序列是否符合语法规则

- 自顶向下（推导）：递归子程序法、预测分析法（LL(1)）
- 自底向上（归约）：算符优先分析法、LR系列（LR(0)、SLR(1)、LR(1)、LALR(1)）

## 2. 自顶向下的语法分析面临的问题与解决方法
**基本思想**：从文法的开始符号出发，为输入符号串寻找一个最左推导。

### 2.1 自顶向下分析用到的技术
- **最左推导**（对应最右规约）、最右推导（对应最左规约）
- 语法树（树根、中间节点、叶节点）
- **短语**、**直接短语**、**句柄**、句子、语言、语法分析

### 2.2 面临的问题及解决
- **二义性**：多个最左推导的句子。（利用语义信息消除，引入新的语法变量）
- **回溯问题**：多个候选式存在公共前缀。（提取左因子）
- **左递归**：（直接、间接）（左）递归。（变左递归为右递归，消除算法）

### 2.3 LL(1) 文法
- 上下文无关文法的子集，**满足条件**。
- 计算**FIRST集**和**FOLLOW集**。

## 3. 预测分析法

### 3.1 预测分析器的构成
通用的控制算法、分析栈、缓冲区、分析表

### 3.2 预测分析表的构造算法


### 3.3 预测分析的错误恢复
应急恢复策略。构造同步符号集synch（Follow集）

	如果M[A,a]为空，忽略输入符号a
	如果M[A,a]为synch，弹出A（或忽略a）
	如果栈顶终结符与输入符号不匹配，弹出栈顶终结符

## 4. 递归梯度下降法
- **基本思想**：为每个非终结符，编写一个可以递归调用的处理子程序，终结符则直接匹配。
- 构造语法分析的**语法图**，化简与实现（左右因子提取，左右递归消除）。

## 5. 本章小结
- 利用First集和Follow集判定上下文无关文法是否是LL(1)文法

## 6. 习题
- 如果文法G是无二义的，则它的任何句子α最左推导和最右推导对应的**语法树必定相同**。
- LL(1)：L->从左向右扫描，L->最左推导，1->向前查看一个符号（**确定使用哪一个产生式进行展开**）
- 在编译过程中，如果遇到错误应该**当发现错误时，跳过错误所在的语法单位继续分析下去**
- First集可以含空，Follow集和select集**不含空**。