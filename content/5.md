# 五. 自底向上的语法分析
重点：自底向上分析的基本思想，算符优先分析法的基本思想。LR 分析器的基本思想，LR分析算法，规范句型活前缀及其识别器——DFA，LR(0)分析表的构造，SLR(1)分析表的构造, LR(1)分析表的构造

难点：规范句型活前缀，LR项目闭包与项目集规范族。
## 1. 自底向上的语法分析概述
- 核心：寻找可归约串——**句柄**
- 思想：移进归约
- 冲突处理：对句柄的识别。优先法、状态法。

## 2. 算符优先分析法
- 思想：将终结符作为算符，借助算符之间的优先关系确定句柄。
- 定义：算符文法，相邻，优先关系，算符优先文法。
- 构造算符优先矩阵：**FIRSTOP**、**LASTOP**、构造算法、#的优先级处理（改造文法）。
- 算符优先分析算法，问题，素短语，**最左素短语**。
- 优先函数的定义、损失、构造。
- 算符优先分析法的错误处理及优缺点。

## 3. LR分析法
- LR语法分析器的总体结构：输入缓冲区、状态/符号栈、分析表、分析程序
- 状态的变迁；核心——分析表；栈的特点：同进同出
- **LR分析算法**

### 3.1 LR(0)分析法
- LR(0)项目、拓广文法、有效性、LR(0)项目集规范族、**LR(0)文法**
- **LR(0)分析表的构造算法**
- 项目集相容性(无归约归约冲突，移进归约冲突)

### 3.2 SLR(1)分析法
- SLR(1)文法、**SLR(1)分析表的构造算法**、存在冲突的原因


### 3.3 LR(1)分析法
- 后继符(搜索符)、LR(1)项目的有效性、闭包的计算、项目集规范族
- **LR(1)分析表的构造**

### 3.4 LALR(1)分析法
- 合并LR(1)同心集、LALR(1)分析表的构造

### 3.5 二义性文法的应用
- 任何二义性文法都不是LR文法

### 3.6 LR分析的错误处理
- 恐慌模式

## 4. 语法分析程序的自动生成工具yacc

## 5. 本章小结
- 识别能力：LR(0)<SLR(1)<LALR(1)<LR(1)
- 判断一个文法是哪一类文法，只需要看分析表即可

## 6. 习题
- 若a为终结符，则A→α·aβ为**移进**项目
- 若B为非终结符，则 A→a·Bb 为**待约**项目
- 在自底向上的语法分析方法中，分析的关键是**寻找句柄**
- 在自顶向下的语法分析方法中，分析的关键是**选择候选式**
- 在规范归约中，用**句柄**来刻画可归约串
- 自下而上分析的动作是**移进、归约、接受、报错**
- 自上而下分析的动作是**匹配、展开、接受、报错**
- 在LR分析法中，分析栈中存放的状态是识别规范句型**活前缀**的DFA状态
- 在自下而上的语法分析中，应从**句子**开始分析。
- 一个LR(1)文法合并同心集后若不是LALR(1)文法，**则可能存在归约/归约冲突**
- 同心集合并可能会产生新的**归约/归约**冲突
- 编译程序的语法分析器必须输出的信息是**语法错误信息**


