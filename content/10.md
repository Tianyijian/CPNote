# 十. 代码优化
重点：代码优化的任务，局部优化、循环优化、全局优化的基本方法。
 
难点：控制流分析，数据流分析。 

## 1. 优化的种类
- 优化目的(时间效率、空间效率)
- 代码优化程序的结构：控制流分析、数据流分析、代码变换
- 机器相关性、优化范围(局部、全局)、优化语言级(中间代码、机器代码)
- 公共子表达式删除、复制传播、无用代码删除、强度削弱、归纳变量删除、循环不变式外提、常量合并

## 2. 控制流分析
- 分析程序中的控制流程，以找出程序中的循环结构
- 将程序划分为**基本块**集合并转换成**流图**，从流图中找出循环
- 基本块的划分算法：入口语句、出口语句、基本块

## 3. 局部优化
- 局部优化在基本块内完成，主要工具为**DAG图**
- 基本块的DAG表示、从DAG重建四元式序列
- 代数恒等式、局部强度削弱、常量合并
- 数组引用的DAG表示
- 指针赋值和过程调用的DAG表示

## 4. 循环优化
- 循环不变表达式外提
- 归纳变量删除
- 计算强度削弱

## 5. 本章小结
- 以程序的基本块为基础，基本块内的优化叫局部优化，跨基本块的优化为全局优化，循环优化是针对循环进行的优化，是全局优化的一部分。

## 6. 习题
- 程序流图**是强连通的且只有一个入口结点**
- 代码优化应以**等价变换**为基础，既不改变程序的**运行结果**，又能使生成的目标代码**更有效**。
- **DAG：**是基本块内部优化实现的主要工具，表示各个值之间的计算/依赖关系。
