# 九. 运行时存储组织

解决问题：符号空间到地址空间的映射问题

重点：符号表的内容、组织，过程调用实现，静态存储分配、动态存储分配的基本方法。 

难点：活动记录、非局部数据的栈实现问题


## 1. 与存储组织有关的源语言概念与特征
- 名字及其绑定、声明的作用域、过程及其活动、活动树、控制栈

## 2. 存储组织
- 运行时内存的划分
- **活动记录**：连续的存储区，管理活动所需信息。含有连接数据、形式单元、局部数据区等。非嵌套(C)与嵌套语言(Pascal)有所不同。
- 局部数据的组织：字节最小，按类型确定空间，存储对齐。
- 存储分配策略：静态、动态（栈式、堆式）

## 3. 静态存储分配 
- 思想、满足条件
- 顺序分配、分层分配

## 4. 栈式动态存储分配 
- 思想：将整个程序的数据空间设计为一个栈，每当调用一个过程时，它所需的数据空间分配在栈顶，当过程工作结束时，释放这部分空间。
- 运行栈、**调用序列和返回序列**、栈中的可变长数据、局限

## 5. 非局部数据的访问
- 无过程嵌套的静态作用域(C)：非静态局部变量，外部变量和静态局部变量
- 包含嵌套过程的静态作用域(Pascal)：**访问链**(静态链)、**Display表**

## 6. 堆式存储分配 
- 基本思想
- 堆式存储管理的实现：定长块管理、变长块管理(首次满足法、最优满足法、最差满足法)
- 隐式存储分配：标记、回收

## 7. 本章小结
- 活动记录中各种数据域的作用和安排
- 非局部数据访问的实现方法

## 8. 习题
- 在目标代码生成阶段，符号表用于**地址分配**
- 编译方法中，动态存储分配的含义是**在运行阶段为源程序中的量进行分配**
- 运行阶段的存储组织与管理的目的是**为运行阶段的存储分配做准备及提高目标程序的运行速度**
- 函数调用 f(3+a, 6)的翻译
- 缓冲区溢出攻击
- 什么叫静态绑定？什么叫动态绑定？
	- 静态绑定在程序执行之前完成，由编译程序计算函数的入口地址
	- 动态绑定在运行过程中完成，有应用程序自己计算函数的入口地址
- 程序的执行过程中如何进行存储分配？何时为数据目标分配存储空间？
- 编译程序使用**说明标识符的过程或函数的静态层次**区别标识符的作用域
- 过程的Display表记录了**过程的嵌套层次**
- 变量应当**既持有左值又持有右值**